#!/usr/bin/env bash

COW_FILE="/usr/local/share/catwizard/catwizard.cow"

# Check if the cow file exists
if [ ! -f "$COW_FILE" ]; then
    echo "Error: catwizard.cow not found at $COW_FILE."
    exit 1
fi

# Read the cow file into a variable
COW_ART=$(cat "$COW_FILE")

# If user passed arguments, show them inside the bubble
if [ $# -eq 0 ]; then
    echo "$COW_ART"
else
    # Calculate the length of the longest line
    max_len=0
    for word in "$*"; do
        if [ ${#word} -gt $max_len ]; then
            max_len=${#word}
        fi
    done
    # Create bubble top
    echo " " $(printf '_%.0s' $(seq 1 $max_len))
    echo "< $* >"
    echo " " $(printf '-%.0s' $(seq 1 $max_len))
    # Print the cow art
    echo "$COW_ART"
fi
